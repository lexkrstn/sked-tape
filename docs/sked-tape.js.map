{"version":3,"sources":["webpack://SkedTape/webpack/universalModuleDefinition","webpack://SkedTape/webpack/bootstrap","webpack://SkedTape/./src/SkedEventCollisionError.ts","webpack://SkedTape/./src/SkedTape.sass?e949","webpack://SkedTape/./src/SkedTape.ts","webpack://SkedTape/./src/SmoothScroller.ts","webpack://SkedTape/./src/VNode.ts","webpack://SkedTape/./src/VTree.ts","webpack://SkedTape/./src/helpers.ts","webpack://SkedTape/./src/main.ts","webpack://SkedTape/external {\"commonjs\":\"lodash/clone\",\"commonjs2\":\"lodash/clone\",\"amd\":\"lodash/clone\",\"root\":[\"_\",\"clone\"]}","webpack://SkedTape/external {\"commonjs\":\"lodash/cloneDeep\",\"commonjs2\":\"lodash/cloneDeep\",\"amd\":\"lodash/cloneDeep\",\"root\":[\"_\",\"cloneDeep\"]}","webpack://SkedTape/external {\"commonjs\":\"lodash/difference\",\"commonjs2\":\"lodash/difference\",\"amd\":\"lodash/difference\",\"root\":[\"_\",\"difference\"]}","webpack://SkedTape/external {\"commonjs\":\"lodash/intersection\",\"commonjs2\":\"lodash/intersection\",\"amd\":\"lodash/intersection\",\"root\":[\"_\",\"intersection\"]}","webpack://SkedTape/external {\"commonjs\":\"lodash/omit\",\"commonjs2\":\"lodash/omit\",\"amd\":\"lodash/omit\",\"root\":[\"_\",\"omit\"]}"],"names":[],"mappings":"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","file":"sked-tape.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash/clone\"), require(\"lodash/cloneDeep\"), require(\"lodash/difference\"), require(\"lodash/intersection\"), require(\"lodash/omit\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash/clone\", \"lodash/cloneDeep\", \"lodash/difference\", \"lodash/intersection\", \"lodash/omit\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SkedTape\"] = factory(require(\"lodash/clone\"), require(\"lodash/cloneDeep\"), require(\"lodash/difference\"), require(\"lodash/intersection\"), require(\"lodash/omit\"));\n\telse\n\t\troot[\"SkedTape\"] = factory(root[\"_\"][\"clone\"], root[\"_\"][\"cloneDeep\"], root[\"_\"][\"difference\"], root[\"_\"][\"intersection\"], root[\"_\"][\"omit\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_lodash_clone__, __WEBPACK_EXTERNAL_MODULE_lodash_cloneDeep__, __WEBPACK_EXTERNAL_MODULE_lodash_difference__, __WEBPACK_EXTERNAL_MODULE_lodash_intersection__, __WEBPACK_EXTERNAL_MODULE_lodash_omit__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.ts\");\n","export default class SkedEventCollisionError extends Error {\n  constructor(private eventId: number) {\n    super();\n\n    this.name = 'SkedEventCollisionError';\n    this.message = 'Collision with entry #' + eventId;\n    // Use V8's native method if available, otherwise fallback\n    if ('captureStackTrace' in Error) {\n      Error.captureStackTrace(this, SkedEventCollisionError);\n    } else {\n      this.stack = (new (Error as any)()).stack;\n    }\n  }\n}\n","// extracted by mini-css-extract-plugin","import clone from 'lodash/clone';\nimport cloneDeep from 'lodash/cloneDeep';\nimport omit from 'lodash/omit';\nimport {\n  addClass,\n  ceilHours,\n  closest,\n  countRangesIntersections,\n  eventFromSkedEvent,\n  floorHours,\n  gapBetween,\n  getDurationHours,\n  getElementOffset,\n  getMidnightAfter,\n  getMidnightBefore,\n  getMsFromMidnight,\n  getMsToMidnight,\n  MS_PER_DAY,\n  MS_PER_HOUR,\n  MS_PER_MINUTE,\n  Range,\n  rangesIntersection,\n  removeClass,\n} from './helpers';\nimport SkedEventCollisionError from './SkedEventCollisionError';\nimport SmoothScroller from './SmoothScroller';\nimport VNode, { VNodeChild, VNodeProps } from './VNode';\nimport VTree from './VTree';\n\nconst CURRENT_TZ_OFFSET = new Date().getTimezoneOffset();\n\nfunction createElement(tagName: string, props?: VNodeProps, children?: VNodeChild) {\n  return new VNode(tagName, props, children);\n}\n\nexport type CreateElementFn = typeof createElement;\n\nexport interface PointData {\n  locationId: number;\n  date: Date;\n}\n\nexport interface SkedLocation {\n  id: number;\n  name: string;\n  order?: number;\n  tzOffset?: number;\n  userData?: {\n    [key: string]: any;\n  };\n}\n\nexport interface SkedEvent {\n  id: number;\n  name: string;\n  locationId: number;\n  start: Date;\n  end: Date;\n  data: {\n    [key: string]: string;\n  };\n  url?: string;\n  className?: string;\n  disabled: boolean;\n  active: boolean;\n  userData: {\n    [key: string]: any;\n  };\n}\n\nexport type SkedEventInput = Partial<\n  Omit<SkedEvent, 'name' | 'locationId' | 'start' | 'end'>\n> & Pick<SkedEvent, 'name' | 'locationId' | 'start' | 'end'>;\n\nexport type SkedDraggedEvent = Omit<SkedEventInput, 'start' | 'end' | 'locationId'> & {\n  duration: number,\n};\n\ninterface SkedIntersection extends Range<Date> {\n  events: SkedEvent[];\n}\n\nexport interface DummyEvent {\n  draggedEvent: SkedEventInput;\n  duration: number;\n  end?: Date;\n  locationId?: number;\n  name: string;\n  start?: Date;\n  takenFromTimeline: boolean;\n}\n\nexport interface SkedFormatters {\n  date(date: Date, endian?: 'm' | 'l', delim?: string): string;\n  roundDuration(ms: number): number;\n  duration(ms: number, opts?: Partial<{ hrs: string, min: string }>): string;\n  hours(hours: number): string;\n  time(date: Date): string;\n}\n\nconst DefaultFormatters: SkedFormatters = {\n  /**\n   * Formats the date.\n   *\n   * Note, since the component itself invokes the function with a single\n   * argument, when overriding the function you should provide only the first\n   * one. The sole purpose of the rest of them is to be used from the derived\n   * function for convenience.\n   *\n   * @param {Date} date The date to format.\n   * @param {'m'|'l'} endian Date format endianess ('m' - US, 'l' - EU).\n   *                         Default value is 'm'.\n   * @param {String} delim Date component delimiter.\n   *                       Default - '/' or '.' depending on `endian`'s value.\n   */\n  date(date: Date, endian: 'm' | 'l' = 'm', delim?: string): string {\n    delim = delim || (endian === 'm' ? '/' : '.');\n    let nums = [date.getDate(), date.getMonth() + 1, date.getFullYear()];\n    if (endian === 'm') {\n      nums = [nums[1], nums[0], nums[2]];\n    }\n    return nums.join(delim);\n  },\n\n  roundDuration(ms: number): number {\n    return ms;\n  },\n\n  duration(ms: number, opts?: Partial<{ hrs: string, min: string }>): string {\n    const h = Math.floor(ms / MS_PER_HOUR);\n    const m = Math.floor((ms % MS_PER_HOUR) / MS_PER_MINUTE);\n    const hrs = (opts && opts.hrs) || (h > 1 ? 'hrs' : 'hr');\n    const min = (opts && opts.min) || (m > 1 ? 'mins' : 'min');\n    let format = h ? h + hrs : '';\n    format += h && m ? ' ' : '';\n    format += m ? m + min : '';\n    return format;\n  },\n\n  hours(hours: number): string {\n    return (hours < 10 ? '0' : '') + hours + ':00';\n  },\n\n  time(date: Date): string {\n    const h = date.getHours();\n    const m = date.getMinutes();\n    return (h < 10 ? '0' + h : h) + ':' + (m < 10 ? '0' + m : m);\n  },\n};\n\n/**\n * Describes SkedTape's constructor parameters.\n */\nexport interface SkedTapeCtorOptions {\n  el: HTMLElement;\n  formatters?: SkedFormatters;\n  start: Date;\n  end: Date;\n  /// Initial zoom level.\n  zoom?: number;\n  minZoom?: number;\n  maxZoom?: number;\n  /// Default zooming up and down increment/decrement value.\n  zoomStep?: number;\n  /// Whether to show from-to dates in events.\n  showEventTime?: boolean;\n  /// Whether to show duration in events.\n  showEventDuration?: boolean;\n  /// Whether to show dates bar.\n  showDates?: boolean;\n  /// Minimum time between events required for the user to be able to add an event.\n  minIntervalBetween?: number;\n  /// Minimum gap between events to show minutes.\n  minTimeGapShown?: number;\n  /// Maximum gap between events to show minutes.\n  maxTimeGapShown?: number;\n  /// Minimum gap to DO NOT highlight adjacent events.\n  tooSmallInterval?: number | false;\n  /// Enables horizontal timeline scrolling with vertical mouse wheel.\n  scrollWithYWheel?: boolean;\n  /// Enables sorting of locations.\n  sorting?: boolean;\n  /// Specifies sorting columns. The property accepts two possible values:\n  /// 'order' (sorting by the property 'order' provided in location objects)\n  /// or 'name' (locale-aware case insensitive comparison by name).\n  orderBy?: 'order' | 'name';\n  /// The number of minutes the dummy event will be snapped to. To\n  /// disable snapping set any falsy value.\n  snapToMins?: number;\n  /// Whether the Right Mouse Button cancels dragging an event.\n  rmbCancelsDrag?: boolean;\n  /// Default timezone for locations, takes effect when you don't specify it\n  /// in location descriptor. The default value is a browser's current timezone.\n  tzOffset?: number;\n  /// Enables or disables showing serifs on time indicator lines.\n  timeIndicatorSerifs?: boolean;\n  /// Enables or disables showing intervals between the event dragged and the\n  /// other ones on the left and right.\n  showIntermission?: boolean;\n  /// Interval (in minutes) between events to show intermission time when it is\n  /// enabled.\n  intermissionRange?: [number, number];\n  /// Turns on drag and drop events.\n  dndEnabled?: boolean;\n  /// Date text width in pixel. The value is used to decide whether it is\n  /// preferable to show dates on both sides of the ruler. This value must be\n  /// greater the actual one by the horizontal padding (30px by default).\n  dateTextWidth: number;\n  /// The hook invoked to determine whether an event may be added to a location.\n  /// The default implementation always returns *true*.\n  /// You should avoid mutating the arguments in this hook (that may cause\n  /// unexpected behaviour).\n  canAddIntoLocation?: (location: SkedLocation, event: DummyEvent) => boolean;\n  /// Invoked after getting a positive result from the `canAddIntoLocation()`\n  /// hook just before updating the event. Here you can place any logic that\n  /// mutates the event object given.\n  beforeAddIntoLocation?: (location: SkedLocation, event: DummyEvent) => void;\n  /// The callback that returns additional classe names to the location VNode.\n  /// The function is called whenever a location VNode is rendered.\n  locationClasses?: (location: SkedLocation, canAdd: boolean) => string | string[];\n  /// The function that returns virtual subnodes of a schedule location.\n  /// When provided it supresses the default implementation, so you'll be\n  /// responsible for rendering the *whole* content of the location's virtual\n  /// node. The first argument given is a schedule location's model which a bit\n  /// different from that you fed the plugin with. The last argument is the\n  /// function that you should use to create subnodes (see the notes about VDOM\n  /// above). The returned value of the function will be passed to the third\n  /// argument of the inner createElement function which renders the main\n  /// container's VNode of the location. That means you are able to return some\n  /// text, a VNode or an array of VNode's. For better insight how to use it\n  /// there is an example in DEMO.\n  renderLocationContent?: (\n    location: SkedLocation,\n    createElement: CreateElementFn,\n  ) => VNodeChild;\n  /// The function that returns virtual subnodes of a schedule event.\n  /// When provided it supresses the default implementation, so you'll be\n  /// responsible for rendering the *whole* content of an event. The first\n  /// argument given is a schedule event's model which a bit different from\n  /// that you fed the plugin with. The last argument is the function that you\n  /// should use to create subnodes (see the notes about VDOM above). The\n  /// returned value of the function will be passed to the third argument of the\n  /// inner createElement function which renders the main container's VNode of\n  /// the event. That means you are able to return some text, a VNode or an\n  /// array of VNode's. For better insight how to use it there is an example in\n  /// DEMO.\n  renderEventContent?: (\n    event: SkedEvent,\n    createElement: CreateElementFn,\n  ) => VNodeChild;\n  /// Fires when the user clicks on an event element.\n  onEventClick?: (event: SkedEvent, mouseEvent: MouseEvent) => void;\n  /// Fires when the user click on an event element with right mouse button.\n  onEventMenu?: (event: SkedEvent, mouseEvent: MouseEvent) => void;\n  /// Fires before some event starts being dragged. Returning a falsy value\n  /// prevents the event from being dragged.\n  onEventBeforeDrag?: (event: SkedEvent) => boolean;\n  /// Fires when the event starts being dragged just after `onEventBeforeDrag()`.\n  onEventDrag?: (event: SkedEvent) => void;\n  /// Fires whenever an event stops being dragged either for RMB click or\n  /// programmatically call of `cancelEventDrag()`. The sole argument refers\n  /// the event of timeline being dragged, which may be null (in case the drag\n  /// was started with dragNewEvent()).\n  onEventDragCancel?: (event: SkedEventInput) => void;\n  /// Fires when the user tries to drop the event dragged into the incorrect\n  /// position occupied by some other event yet.\n  onEventDropRefusal?: (event: DummyEvent) => void;\n  /// Fires just before `onEventDrop()` and may prevent the action by returning\n  /// falsy value.\n  onEventBeforeDrop?: (event: DummyEvent) => boolean;\n  /// Fires when the user clicks on the appropriate place on the timeline for\n  /// the event dragged to being dropped.\n  onEventDrop?: (event: SkedEvent) => void;\n  /// Fires when the user clicks on a DOM element being rendered to outline\n  /// intersection of events.\n  onIntersectionClick?: (\n    events: SkedEvent[],\n    pointData: PointData,\n    mouseEvent: MouseEvent,\n  ) => void;\n  /// Fires when the user clicks with right mouse button on a DOM element being\n  /// rendered to outline intersection of events.\n  onIntersectionMenu?: (\n    events: SkedEvent[],\n    pointData: PointData,\n    mouseEvent: MouseEvent,\n  ) => void;\n  /// Fires when the user clicks on a non-occupied point of the timeline.\n  onTimelineClick?: (event: MouseEvent, pointData: PointData) => void;\n  /// Fires when the user clicks on a non-occupied point of the timeline with RMB.\n  onTimelineMenu?: (event: MouseEvent, pointData: PointData) => void;\n  /// Fires when the user zooms in or out. Not called on programmatic zooming.\n  onZoom?: (zoom: number) => void;\n}\n\n/**\n * Schedule tape widget.\n */\nexport default class SkedTape extends VTree {\n  public static format = DefaultFormatters;\n  private caption = '';\n  private locations: SkedLocation[] = [];\n  private events: SkedEvent[] = [];\n  private format: SkedFormatters = DefaultFormatters;\n  private dndEnabled = false;\n  private dateTextWidth = 110;\n  private dummyEvent: DummyEvent = null;\n  private start: Date;\n  private end: Date;\n  private zoom = 1;\n  private minZoom = 0.5;\n  private maxZoom = 10;\n  private zoomStep = 0.5;\n  private baseHourWidth = 96;\n  private showEventTime = false;\n  private showEventDuration = false;\n  private showDates = true;\n  private minIntervalBetween = 0;\n  private minTimeGapShown = 1 * MS_PER_MINUTE;\n  private maxTimeGapShown = 60 * MS_PER_MINUTE - 1;\n  private tooSmallInterval: number | false = false;\n  private scrollWithYWheel = false;\n  private sorting = false;\n  private orderBy: 'order' | 'name' = 'order';\n  private snapToMins = 1;\n  private rmbCancelsDrag = true;\n  private tzOffset = CURRENT_TZ_OFFSET;\n  private timeIndicatorSerifs = false;\n  private showIntermission = false;\n  private intermissionRange: [number, number] = [1, 60];\n  private lastPicked: PointData = null;\n  private indicatorTimeout: NodeJS.Timeout;\n  private listeners: Array<{ listener: (event: Event) => void, type: string }> = [];\n  private canAddIntoLocation: (location: SkedLocation, event: DummyEvent) => true;\n  private beforeAddIntoLocation: (location: SkedLocation, event: DummyEvent) => void;\n  private onEventClick: (event: SkedEvent, mouseEvent: MouseEvent) => void;\n  private onEventMenu: (event: SkedEvent, mouseEvent: MouseEvent) => void;\n  private onEventBeforeDrag: (event: SkedEvent) => boolean;\n  private onEventDrag: (event: SkedEvent) => void;\n  private onEventDragCancel: (event: SkedEventInput) => void;\n  private onEventDropRefusal: (event: DummyEvent) => void;\n  private onEventBeforeDrop: (event: DummyEvent) => boolean;\n  private onEventDrop: (event: SkedEvent) => void;\n  private onIntersectionClick: (\n    events: SkedEvent[],\n    pointData: PointData,\n    mouseEvent: MouseEvent,\n  ) => void;\n  private onIntersectionMenu: (\n    events: SkedEvent[],\n    pointData: PointData,\n    mouseEvent: MouseEvent,\n  ) => void;\n  private onTimelineClick: (event: MouseEvent, pointData: PointData) => void;\n  private onTimelineMenu: (event: MouseEvent, pointData: PointData) => void;\n  private onZoom: (zoom: number) => void;\n  private smoothScroller: SmoothScroller;\n  private animFrameId: any;\n\n  constructor(opts: Partial<SkedTapeCtorOptions>) {\n    super(opts.el);\n\n    Object.assign(this, opts);\n    if (opts.formatters) {\n      this.format = { ...DefaultFormatters, ...opts.formatters };\n    }\n    this.registerEventHandlers();\n  }\n\n  public destroy() {\n    this.cleanup();\n    this.root.innerHTML = '';\n    removeClass(this.root, 'sked-tape sked-tape--has-dates');\n  }\n\n  /**\n   * Returns whether Drag and Drop events enabled.\n   */\n  public get isDnDEnabled() {\n    return this.dndEnabled;\n  }\n\n  /**\n   * Turns on/off Drag and Drop for events.\n   */\n  public enableDnD(on: boolean = true) {\n    if (on !== this.dndEnabled) {\n      if (on) {\n        this.dndEnabled = true;\n      } else {\n        if (this.dummyEvent) {\n          this.cancelEventDrag();\n        }\n        this.dndEnabled = false;\n      }\n    }\n  }\n\n  public setTimespan(start: Date, end: Date, { rerender = true } = {}) {\n    if (start > end) {\n      throw new Error('Invalid time range: ' + JSON.stringify([start, end]));\n    }\n    this.start = floorHours(start);\n    this.end = ceilHours(end);\n    if (rerender) {\n      this.scheduleRerender();\n    }\n  }\n\n  /**\n   * A shorthand for `setTimespan()` that sets timespan between some\n   * specified hours (optional) of a particular date.\n   */\n  public setDate(\n    date: Date,\n    minHours: number = 0,\n    maxHours: number = 24,\n    opts?: { rerender?: boolean },\n  ) {\n    const midnight = new Date(date);\n    midnight.setHours(0, 0, 0, 0);\n    const start = new Date(midnight);\n    start.setHours(minHours);\n    let end;\n    if (maxHours && maxHours !== 24) {\n      end = new Date(midnight.getTime());\n      end.setHours(maxHours);\n    } else {\n      end = new Date(midnight.getTime() + MS_PER_DAY);\n    }\n    this.setTimespan(start, end, opts);\n  }\n\n  public getZoom() {\n    return this.zoom;\n  }\n\n  public setZoom(zoom: number) {\n    this.zoom = Math.max(Math.min(zoom, this.maxZoom), this.minZoom);\n    (this.refs.canvas as HTMLElement).style.width = this.computeCanvasWidth() + 'px';\n    (zoom >= 1 ? removeClass : addClass)(this.root, 'sked-tape--condensed');\n    // Rerender dates manually here so that they may decide whether it is\n    // required for them to be rendered with or without &--short modifier.\n    this.materializePartial(this.renderDates());\n  }\n\n  public resetZoom() {\n    this.setZoom(1);\n  }\n\n  public zoomIn(inc?: number) {\n    this.setZoom(this.zoom + (inc || this.zoomStep));\n  }\n\n  public zoomOut(dec?: number) {\n    this.setZoom(this.zoom - (dec || this.zoomStep));\n  }\n\n  public locationExists(id: number): boolean {\n    return !!this.locations.find(location => location.id === id);\n  }\n\n  public setLocations(locations: SkedLocation[], { rerender = true } = {}) {\n    const locationIds = locations.map(location => location.id);\n    const deletedLocationIds = this.locations\n      .map(location => location.id)\n      .filter(id => locationIds.indexOf(id) < 0);\n    this.locations = [];\n    for (const location of locations) {\n      this.addLocation(location, { rerender: false });\n    }\n    this.events = this.events\n      .filter(event => deletedLocationIds.indexOf(event.locationId) >= 0);\n    if (rerender) {\n      this.scheduleRerender();\n    }\n  }\n\n  public addLocation(location: SkedLocation, { rerender = true } = {}) {\n    this.locations.push({\n      id: location.id,\n      name: location.name,\n      order: location.order || 0,\n      tzOffset: location.tzOffset,\n      userData: location.userData ? { ...location.userData } : {},\n    });\n    if (rerender) {\n      this.scheduleRerender();\n    }\n  }\n\n  public removeLocation(id: number, { rerender = true } = {}) {\n    const index = this.locations.findIndex(location => location.id === id);\n    if (index < 0) {\n      throw new Error(`Cannot find location #${id}`);\n    }\n    this.locations.splice(index, 1);\n    if (rerender) {\n      this.scheduleRerender();\n    }\n  }\n\n  public getLocation(id: number) {\n    return this.locations.find(location => location.id === id);\n  }\n\n  public getLocations() {\n    if (this.sorting && this.orderBy === 'name') {\n      return this.locations.sort((a, b) => {\n        const aName = a.name.toLocaleLowerCase();\n        const bName = b.name.toLocaleLowerCase();\n        return aName.localeCompare(bName);\n      });\n    } else if (this.sorting && this.orderBy === 'order') {\n      return this.locations.sort((a, b) => a.order - b.order);\n    } else {\n      return this.locations;\n    }\n  }\n\n  public collide(event: SkedEvent | DummyEvent): SkedEvent {\n    if (event.start && event.end) {\n      return this.events.find(iEvent => (\n        event.locationId === iEvent.locationId &&\n        gapBetween(event as Range<Date>, iEvent) < this.minIntervalBetween\n      ));\n    }\n    return null;\n  }\n\n  public putEvent(\n    event: SkedEventInput,\n    { mayIntersect = false, rerender = true } = {},\n  ) {\n    if (!this.locationExists(event.locationId)) {\n      throw new Error('Unknown location #' + event.locationId);\n    }\n\n    if (event.start > event.end) {\n      throw new Error('Invalid time range: ' +\n        JSON.stringify([event.start, event.end]));\n    }\n\n    const newEvent: SkedEvent = {\n      active: event.active || false,\n      className: event.className || null,\n      data: event.data ? cloneDeep((event as SkedEvent).data) : {},\n      disabled: event.disabled || false,\n      end: new Date(event.end),\n      id: event.id ? event.id : this.uniqId(),\n      locationId: event.locationId,\n      name: event.name,\n      start: new Date(event.start),\n      url: event.url || null,\n      userData: event.userData ? cloneDeep(event.userData) : {},\n    };\n\n    if (!mayIntersect) {\n      const collided = this.collide(newEvent);\n      if (collided) {\n        throw new SkedEventCollisionError(collided.id);\n      }\n    }\n\n    if (event.id && this.dummyEvent && this.dummyEvent.draggedEvent.id === event.id) {\n      this.dummyEvent.draggedEvent = newEvent;\n    } else {\n      const index = this.events.findIndex(iEvent => iEvent.id === newEvent.id);\n      if (index >= 0) {\n        this.events[index] = newEvent;\n      } else {\n        this.events.push(newEvent);\n      }\n    }\n\n    if (rerender) {\n      this.scheduleRerender();\n    }\n\n    return newEvent;\n  }\n\n  public putEvents(\n    events: SkedEvent[],\n    opts?: { mayIntersect?: boolean, rerender?: boolean },\n  ) {\n    for (const event of events) {\n      this.putEvent(event, opts);\n    }\n  }\n\n  public setEvents(\n    events: SkedEvent[],\n    opts?: { mayIntersect?: boolean, rerender?: boolean },\n  ) {\n    this.events = [];\n    this.putEvents(events, opts);\n  }\n\n  public removeEvent(eventId: number, { rerender = true } = {}): boolean {\n    const index = this.events.findIndex(event => event.id === eventId);\n    if (index >= 0) {\n      this.events.splice(index, 1);\n      if (rerender) {\n        this.scheduleRerender();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  public getEvents(): SkedEvent[] {\n    return this.events;\n  }\n\n  public getEvent(id: number): SkedEvent {\n    return this.events.find(event => event.id === id);\n  }\n\n  /**\n   * Returns event intersection list for a specified location.\n   */\n  public getIntersections(locationId: number): SkedIntersection[] {\n    const intersections: SkedIntersection[] = [];\n    const occupied = (intersection: SkedIntersection) => {\n      for (const iIntersection of intersections) {\n        if (\n          intersection.start.getTime() === iIntersection.start.getTime() &&\n          intersection.end.getTime() === iIntersection.end.getTime()\n        ) {\n          return true;\n        }\n      }\n      return false;\n    };\n    for (let i = 0; i < this.events.length; i++) {\n      const iEvent = this.events[i];\n      if (iEvent.locationId === locationId) {\n        for (let j = i + 1; j < this.events.length; ++j) {\n          const jEvent = this.events[j];\n          if (jEvent.locationId === locationId) {\n            const intersection = rangesIntersection(iEvent, jEvent) as SkedIntersection;\n            if (intersection && !occupied(intersection)) {\n              // Intersection found and the exact time\n              // is unique (for rendering optimization purposes)\n              intersection.events = [iEvent, jEvent];\n              intersections.push(intersection);\n            }\n          }\n        }\n      }\n    }\n    return intersections;\n  }\n\n  public dragEvent(eventId: number) {\n    // Cancel dragging the event is being dragged right now\n    if (this.isDraggingEvent()) {\n      this.cancelEventDrag();\n    }\n    const event = this.getEvent(eventId);\n    // Make sure the event is allowed to be draggable\n    if (!this.onEventBeforeDrag || this.onEventBeforeDrag(event)) {\n      if (this.onEventDrag) {\n        this.onEventDrag(event);\n      }\n      this.removeEvent(eventId, { rerender: false }); // Remove it from the data\n      // Rerender the row\n      const location = this.getLocation(event.locationId);\n      const events = this.filterLocationEvents(location.id);\n      this.materializePartial(this.renderEventRow(location, events));\n\n      this.dragDummyEvent({\n        draggedEvent: event,\n        duration: event.end.getTime() - event.start.getTime(),\n        end: clone(event.end),\n        name: event.name,\n        start: clone(event.start),\n        takenFromTimeline: true,\n      });\n    }\n  }\n\n  public dragNewEvent(event: SkedDraggedEvent) {\n    // Cancel dragging the event is being dragged right now\n    if (this.isDraggingEvent()) {\n      this.cancelEventDrag();\n    }\n    this.dragDummyEvent({\n      draggedEvent: {\n        ...omit(event, ['duration']),\n        end: new Date(this.start.getTime() + event.duration),\n        locationId: 0,\n        start: new Date(this.start),\n      },\n      duration: event.duration,\n      name: event.name,\n      takenFromTimeline: false,\n    });\n  }\n\n  public cancelEventDrag() {\n    if (this.dummyEvent) {\n      // Put the dragged event back onto the timeline\n      const event = this.dummyEvent.draggedEvent;\n      if (this.dummyEvent.takenFromTimeline) {\n        this.putEvent(event, { mayIntersect: true, rerender: false });\n        const location = this.getLocation(event.locationId);\n        const events = this.filterLocationEvents(location.id);\n        this.materializePartial(this.renderEventRow(location, events));\n      }\n      if (this.onEventDragCancel) {\n        this.onEventDragCancel(event);\n      }\n      // Clean up the dummy\n      this.dematerializePartial('dummyEvent');\n      delete this.dummyEvent;\n      // Rerender the locations in order to apply some classes if needed\n      this.materializePartial(this.renderLocations());\n    }\n  }\n\n  public isDraggingEvent() {\n    return !!this.dummyEvent;\n  }\n\n  public setSnapToMins(mins: number) {\n    this.snapToMins = mins;\n  }\n\n  private dragDummyEvent(dummyEvent: DummyEvent) {\n    this.dummyEvent = dummyEvent;\n    // Place on the last mouse position on the timeline\n    if (this.lastPicked) {\n      this.moveDummyEvent(this.lastPicked);\n    }\n    // TODO: Observer pattern would be better here\n    // Rerender the locations in order to apply some classes if needed\n    this.materializePartial(this.renderLocations());\n  }\n\n  private completeEventDrag() {\n    const event = this.dummyEvent;\n    // Check for collisions\n    if (isNaN(event.locationId) || !event.start || this.collide(event)) {\n      if (this.onEventDropRefusal) {\n        this.onEventDropRefusal(event);\n      }\n      return;\n    }\n    // Add event if the operation hasn't been canceled by any event handler\n    if (!this.onEventBeforeDrop || this.onEventBeforeDrop(event)) {\n      // At this step there something may have changed by\n      // the callback above, so here we do the collision check again.\n      try {\n        this.dematerializePartial('dummyEvent');\n        delete this.dummyEvent;\n        // We've checked the locationId to be non NaN above\n        const newEvent = this.putEvent({\n          ...cloneDeep(event.draggedEvent),\n          end: clone(event.end),\n          locationId: event.locationId,\n          start: clone(event.start),\n        });\n        // Rerender the row of events\n        const location = this.getLocation(event.locationId);\n        const events = this.filterLocationEvents(location.id);\n        this.materializePartial(this.renderEventRow(location, events));\n\n        if (this.onEventDrop) {\n          this.onEventDrop(newEvent);\n        }\n        // TODO: Observer pattern would be better here\n        // Rerender the locations in order to apply some classes if needed\n        this.materializePartial(this.renderLocations());\n      } catch (e) {\n        if (!(e instanceof SkedEventCollisionError)) {\n          throw e;\n        }\n        if (this.onEventDropRefusal) {\n          this.onEventDropRefusal(event);\n        }\n      }\n    }\n  }\n\n  /**\n   * Mutates dummyEvent to conform a position info.\n   *\n   * @param picked The position info returned by the pick() function.\n   */\n  private moveDummyEvent(picked: PointData) {\n    const event = this.dummyEvent;\n    let start = picked.date;\n    if (this.snapToMins) {\n      const hr = floorHours(start);\n      const left = (start.getTime() - hr.getTime()) / MS_PER_MINUTE;\n      const lower = Math.floor(left / this.snapToMins) * this.snapToMins;\n      const min = left - lower < this.snapToMins / 2 ? lower : lower + this.snapToMins;\n      start = new Date(hr.getTime() + Math.round(min * MS_PER_MINUTE));\n    }\n    event.start = start;\n    event.end = new Date(start.getTime() + event.duration);\n    if (picked.locationId) {\n      const location = this.getLocation(picked.locationId);\n      if (!this.canAddIntoLocation || this.canAddIntoLocation(location, event)) {\n        if (picked.locationId !== event.locationId) {\n          if (this.beforeAddIntoLocation) {\n            this.beforeAddIntoLocation(location, event);\n          }\n          event.locationId = picked.locationId;\n          const vNode = this.renderDummyEvent(event);\n          this.dematerializePartial('dummyEvent');\n          this.materializeNewChild('eventRow' + event.locationId, vNode);\n        } else if (!this.refs.dummyEvent) {\n          const vNode = this.renderDummyEvent(event);\n          this.dematerializePartial('dummyEvent');\n          this.materializeNewChild('eventRow' + event.locationId, vNode);\n        } else {\n          const vNode = this.renderDummyEvent(event);\n          this.materializePartial(vNode);\n        }\n      }\n    }\n  }\n\n  private findEventsAtTime(date: Date, locationId: number): SkedEvent[] {\n    const time = date.getTime();\n    return this.getEvents().filter(event => (\n      event.locationId === locationId &&\n      event.start.getTime() <= time && event.end.getTime() >= time\n    ));\n  }\n\n  private pick(e: MouseEvent): PointData {\n    const timeline = this.refs.timeline as HTMLElement;\n    const scalar = (e.pageX - getElementOffset(timeline).left) / timeline.clientWidth;\n    const time = this.start.getTime() + scalar * (this.end.getTime() - this.start.getTime());\n    const rowEl = closest(e.target as HTMLElement, '.sked-tape__event-row');\n    return {\n      date: new Date(Math.round(time)),\n      locationId: rowEl ? parseInt(rowEl.dataset.locationId, 10) : undefined,\n    };\n  }\n\n  private registerEventHandlers() {\n    this.registerEventHandler('click', '.sked-tape__event',\n      this.handleEventClick.bind(this));\n    this.registerEventHandler('contextmenu', '.sked-tape__event',\n      this.handleEventContextMenu.bind(this));\n    this.registerEventHandler('click', '.sked-tape__timeline-wrap',\n      this.handleTimelineClick.bind(this));\n    this.registerEventHandler('contextmenu', '.sked-tape__timeline-wrap',\n      this.handleTimelineContextMenu.bind(this));\n    this.registerEventHandler('mousemove', '.sked-tape__timeline-wrap',\n      this.handleMouseMove.bind(this));\n    this.registerEventHandler('keydown', '.sked-tape__time-frame',\n      this.handleKeyDown.bind(this));\n    this.registerEventHandler('wheel', '.sked-tape__time-frame',\n      this.handleWheel.bind(this));\n    this.registerEventHandler('click', '.sked-tape__intersection',\n      this.handleIntersectionClick.bind(this));\n    this.registerEventHandler('contextmenu', '.sked-tape__intersection',\n      this.handleIntersectionContextMenu.bind(this));\n  }\n\n  private unregisterEventHandlers() {\n    for (const listener of this.listeners) {\n      this.root.removeEventListener(listener.type, listener.listener);\n    }\n    this.listeners = [];\n  }\n\n  private registerEventHandler(\n    type: string,\n    selector: string,\n    handler: (event: Event, currentTarget: HTMLElement) => void,\n  ) {\n    const listener = (event: Event) => {\n      const currentTarget = closest(event.target as HTMLElement, selector);\n      if (currentTarget) {\n        handler(event, currentTarget);\n      }\n    };\n    this.listeners.push({ listener, type });\n    this.root.addEventListener(type, listener);\n  }\n\n  private handleEventClick(mouseEvent: MouseEvent, currentTarget: HTMLElement) {\n    const eventId = parseInt(currentTarget.dataset.eventId, 10);\n    if (this.dndEnabled) {\n      this.dragEvent(eventId);\n    } else if (this.onEventClick) {\n      this.onEventClick(this.getEvent(eventId), mouseEvent);\n    }\n  }\n\n  private handleEventContextMenu(mouseEvent: MouseEvent, currentTarget: HTMLElement) {\n    mouseEvent.preventDefault();\n    if (this.rmbCancelsDrag && this.isDraggingEvent()) {\n      this.cancelEventDrag();\n    } else if (this.onEventMenu) {\n      const eventId = parseInt(currentTarget.dataset.eventId, 10);\n      this.onEventMenu(this.getEvent(eventId), mouseEvent);\n    }\n  }\n\n  private handleIntersectionClick(mouseEvent: MouseEvent) {\n    if (this.onIntersectionClick) {\n      const pointData = this.pick(mouseEvent);\n      const events = this.findEventsAtTime(pointData.date, pointData.locationId);\n      this.onIntersectionClick(events, pointData, mouseEvent);\n    }\n  }\n\n  private handleIntersectionContextMenu(mouseEvent: MouseEvent) {\n    mouseEvent.preventDefault();\n    if (this.rmbCancelsDrag && this.isDraggingEvent()) {\n      this.cancelEventDrag();\n    } else if (this.onIntersectionMenu) {\n      const pointData = this.pick(mouseEvent);\n      const events = this.findEventsAtTime(pointData.date, pointData.locationId);\n      this.onIntersectionMenu(events, pointData, mouseEvent);\n    }\n  }\n\n  private handleTimelineClick(mouseEvent: MouseEvent) {\n    if (!eventFromSkedEvent(mouseEvent)) {\n      if (this.dummyEvent && this.dummyEvent.locationId) {\n        this.completeEventDrag();\n      } else if (!this.dummyEvent && this.onTimelineClick) {\n        this.onTimelineClick(mouseEvent, this.pick(mouseEvent));\n      }\n    }\n  }\n\n  private handleTimelineContextMenu(mouseEvent: MouseEvent) {\n    if (!eventFromSkedEvent(mouseEvent)) {\n      mouseEvent.preventDefault();\n      if (this.rmbCancelsDrag && this.isDraggingEvent()) {\n        this.cancelEventDrag();\n      } else if (this.onTimelineMenu) {\n        this.onTimelineMenu(mouseEvent, this.pick(mouseEvent));\n      }\n    }\n  }\n\n  private handleMouseMove(mouseEvent: MouseEvent) {\n    this.lastPicked = this.pick(mouseEvent);\n    if (this.dummyEvent) {\n      this.moveDummyEvent(this.lastPicked);\n    }\n  }\n\n  private handleKeyDown(kbdEvent: KeyboardEvent) {\n    const oldZoom = this.zoom;\n    switch (kbdEvent.key) {\n      case '+': this.zoomIn(); break;\n      case '-': this.zoomOut(); break;\n    }\n    if (oldZoom !== this.zoom && this.onZoom) {\n      this.onZoom(this.zoom);\n    }\n  }\n\n  private handleWheel(wheelEvent: WheelEvent) {\n    if (wheelEvent.ctrlKey) {\n      wheelEvent.preventDefault();\n      wheelEvent.stopPropagation();\n      const oldZoom = this.zoom;\n      if (wheelEvent.deltaY < 0) {\n        this.zoomIn();\n      } else {\n        this.zoomOut();\n      }\n      if (oldZoom !== this.zoom && this.onZoom) {\n        this.onZoom(this.zoom);\n      }\n    } else if (!wheelEvent.shiftKey && this.scrollWithYWheel) {\n      wheelEvent.preventDefault();\n      wheelEvent.stopPropagation();\n      const frame = this.refs.frame as HTMLElement;\n      this.smoothScroller.addScrollBy({\n        left: (wheelEvent.deltaY > 0 ? 1 : -1) * frame.clientWidth * 0.9,\n      });\n    }\n  }\n\n  private isGapTooSmall(events: SkedEvent[]): boolean {\n    if (this.tooSmallInterval !== false) {\n      let lastEndTime = 0;\n      for (const event of events) {\n        if (event.start.getTime() - lastEndTime <= this.tooSmallInterval) {\n          return true;\n        }\n        lastEndTime = event.end.getTime();\n      }\n    }\n    return false;\n  }\n\n  private uniqId(): number {\n    return 1 + this.events.reduce(\n      (id, event) => Math.max(id, event.id),\n      (this.dummyEvent && this.dummyEvent.draggedEvent.id) || 0);\n  }\n\n  private computeEventWidth(event: Range<Date>): string {\n    // Clamp to timeline edge\n    const eventEnd = this.end < event.end ? this.end : event.end;\n    const durationHours = getDurationHours(event.start, eventEnd);\n    return durationHours / getDurationHours(this.start, this.end) * 100 + '%';\n  }\n\n  private computeEventOffset(event: Range<Date>): string {\n    const hoursBeforeEvent =  getDurationHours(this.start, event.start);\n    return hoursBeforeEvent /  getDurationHours(this.start, this.end) * 100 + '%';\n  }\n\n  private locationClasses = (location: SkedLocation, canAdd: boolean) => {\n    return canAdd !== false ? [] : ['sked-tape__location--forbidden'];\n  }\n\n  private findEventJustBefore(event: DummyEvent): SkedEvent {\n    return this.events.reduce((found, iEvent) => (\n      (\n        iEvent.locationId === event.locationId && // the same location\n        iEvent.end < event.start &&               // ends before\n        (!found || found.end < iEvent.end)        // comes after the found one\n      )\n      ? iEvent : found\n    ), null);\n  }\n\n  private findEventJustAfter(event: DummyEvent): SkedEvent {\n    return this.events.reduce((found, iEvent) => (\n      (\n        iEvent.locationId === event.locationId && // the same location\n        iEvent.start > event.end &&               // starts after\n        (!found || found.start > iEvent.start)    // comes before the found one\n      )\n      ? iEvent : found\n    ), null);\n  }\n\n  private filterLocationEvents(locationId: number) {\n    return this.events\n      .filter(event => (\n        event.locationId === locationId &&\n        event.end > this.start &&\n        event.start < this.end\n      ))\n      // Sort the events by time ascending in order that the gap\n      // between each two of them may be determined in a cycle.\n      .sort((a, b) => a.start.getTime() - b.start.getTime());\n  }\n\n  private getTimelineSpan(): number {\n    return this.end.getTime() - this.start.getTime();\n  }\n\n  private computeCanvasWidth(): number {\n    const base = this.getTimelineSpan() / MS_PER_HOUR * this.baseHourWidth;\n    return Math.round(base * this.zoom);\n  }\n\n  private cleanup() {\n    if (this.indicatorTimeout) {\n      clearInterval(this.indicatorTimeout);\n      delete this.indicatorTimeout;\n    }\n    this.unregisterEventHandlers();\n    this.unscheduleRerender();\n  }\n\n  private renderLocationContent = (\n    location: SkedLocation,\n    createElement: CreateElementFn, // tslint:disable-line no-shadowed-variable\n  ) => {\n    return location.name;\n  }\n\n  private renderLocation(location: SkedLocation): VNode {\n    let canAdd;\n    if (this.isDraggingEvent()) {\n      canAdd = !this.canAddIntoLocation || this.canAddIntoLocation(location, this.dummyEvent);\n    }\n    let classes = this.locationClasses(location, canAdd);\n    classes = classes instanceof Array ? classes : [classes];\n    return createElement(\n      'div',\n      {\n        className: classes.concat('sked-tape__location').join(' '),\n        dataset: { id: location.id },\n        title: location.name,\n      },\n      createElement(\n        'div',\n        { className: 'sked-tape__location-text' },\n        this.renderLocationContent(location, createElement),\n      ),\n    );\n  }\n\n  private renderLocations(): VNode {\n    return createElement(\n      'div',\n      {\n        className: 'sked-tape__locations',\n        ref: 'locations',\n      },\n      this.getLocations().map(this.renderLocation.bind(this)),\n    );\n  }\n\n  private renderAside(): VNode {\n    return createElement(\n      'div',\n      {  className: 'sked-tape__aside' },\n      [\n        createElement(\n          'div',\n          { className: 'sked-tape__caption' },\n          this.caption,\n        ),\n        this.renderLocations(),\n      ],\n    );\n  }\n\n  private renderEventContent = (\n    event: SkedEvent,\n    createElement: CreateElementFn, // tslint:disable-line no-shadowed-variable\n  ): VNodeChild => {\n    let children: VNodeChild = [event.name];\n    if (this.showEventTime || this.showEventDuration) {\n      const duration = this.format.roundDuration(\n        event.end.getTime() - event.start.getTime(),\n      );\n      if (this.showEventTime) {\n        const end = new Date(event.start.getTime() + duration);\n        children = children.concat([\n          createElement('br'),\n          this.format.time(event.start) + ' - ' + this.format.time(end),\n        ]);\n      }\n      if (this.showEventDuration) {\n        children = children.concat([\n          createElement('br'),\n          this.format.duration(duration),\n        ]);\n      }\n    }\n    return children;\n  }\n\n  private renderEvent(event: SkedEvent, classes: string[] = []) {\n    const BE_CLASS = 'sked-tape__event';\n    classes.push(BE_CLASS);\n    if (event.className) {\n      classes.push(event.className);\n    }\n    if (event.disabled) {\n      classes.push(BE_CLASS + '--disabled');\n    }\n    if (event.active) {\n      classes.push(BE_CLASS + '--active');\n    }\n\n    const isAnchor = !!event.url && !event.disabled;\n    const props = {\n      className: classes.join(' '),\n      dataset: {\n        eventId: event.id,\n        ...(event.data || {}),\n      },\n      style: {\n        left: this.computeEventOffset(event),\n        width: this.computeEventWidth(event),\n      },\n      title: event.name,\n    };\n    if (isAnchor) {\n      (props as any).href = event.url;\n    }\n\n    return createElement(\n      isAnchor ? 'a' : 'div',\n      props,\n      createElement(\n        'div',\n        { className: 'sked-tape__center' },\n        this.renderEventContent(event, createElement),\n      ),\n    );\n  }\n\n  private renderEvents(events: SkedEvent[]): VNode[] {\n    return events.map((event, index) => {\n      const classes = [];\n      // Check the gap is too small among the nearest events\n      const nearestEvents = events.slice(Math.max(index - 1, 0), index + 2);\n      if (this.isGapTooSmall(nearestEvents)) {\n        classes.push('sked-tape__event--low-gap');\n      } else if (countRangesIntersections(nearestEvents) > 0) {\n        // We just have no a specific class for that yet...\n        classes.push('sked-tape__event--low-gap');\n      }\n      return this.renderEvent(event, classes);\n    }, this);\n  }\n\n  private renderTimeIndicator(location: SkedLocation): VNode {\n    const indicatorClasses = ['sked-tape__indicator'];\n    if (this.timeIndicatorSerifs) {\n      indicatorClasses.push('sked-tape__indicator--serifs');\n    }\n    const style: { display?: string, left?: string } = {};\n    const tzOffset = location.tzOffset === undefined ? this.tzOffset : location.tzOffset;\n    const tzDiff = tzOffset - CURRENT_TZ_OFFSET;\n    const now = new Date().getTime() - tzDiff * MS_PER_MINUTE;\n    const start = this.start.getTime();\n    const end = this.end.getTime();\n    if (now >= start && now <= end) {\n      style.left = 100 * (now - start) / (end - start) + '%';\n    } else {\n      style.display = 'none';\n    }\n    return createElement(\n      'div',\n      {\n        className: indicatorClasses.join(' '),\n        ref: 'timeIndicator' + location.id,\n        style,\n      },\n    );\n  }\n\n  private renderGap(gap: number, start: Date, end: Date): VNode {\n    const block: Range<Date> = { start, end };\n    return createElement(\n      'div',\n      {\n        className: 'sked-tape__gap',\n        style: {\n          left: this.computeEventOffset(block),\n          width: this.computeEventWidth(block),\n        },\n      },\n      createElement(\n        'span',\n        { className: 'sked-tape__gap-text' },\n        Math.round(gap / MS_PER_MINUTE) + '',\n      ),\n    );\n  }\n\n  private renderGaps(\n    events: SkedEvent[],\n    intersections: SkedIntersection[],\n  ): VNode[] {\n    let lastEndTime = 0;\n    let lastEnd: Date;\n    const gaps = [];\n    for (const event of events) {\n      // whether the event intersects with some other\n      const intersects = !!intersections.find(\n        intersection => !!intersection.events.find(\n          iEvent => iEvent.id === event.id,\n        ),\n      );\n      const gap = event.start.getTime() - lastEndTime;\n      if (gap >= this.minTimeGapShown && gap <= this.maxTimeGapShown && !intersects) {\n        gaps.push(this.renderGap(gap, lastEnd, event.start));\n      }\n      lastEnd = event.end;\n      lastEndTime = lastEnd.getTime();\n    }\n    return gaps;\n  }\n\n  private renderIntersections(intersections: SkedIntersection[]): VNode[] {\n    return intersections\n      .filter(i => i.end >= this.start && i.start <= this.end)\n      .map(intersection => createElement(\n        'div',\n        {\n          className: 'sked-tape__intersection',\n          dataset: { events: intersection.events },\n          style: {\n            left: this.computeEventOffset(intersection),\n            width: this.computeEventWidth(intersection),\n          },\n        },\n      ));\n  }\n\n  private renderDummyEvent(event: DummyEvent): VNode {\n    let leftText: VNodeChild = [this.format.time(event.start)];\n    let rightText: VNodeChild = [this.format.time(event.end)];\n    if (this.showIntermission) {\n      const prevEvent = this.findEventJustBefore(event);\n      if (prevEvent) {\n        const interval = (event.start.getTime() - prevEvent.end.getTime()) / MS_PER_MINUTE;\n        if (\n          interval >= this.intermissionRange[0] &&\n          interval <= this.intermissionRange[1]\n        ) {\n          leftText = leftText.concat(\n            createElement('br'),\n            this.format.duration(interval * MS_PER_MINUTE),\n          );\n        }\n      }\n      const nextEvent = this.findEventJustAfter(event);\n      if (nextEvent) {\n        const interval = (nextEvent.start.getTime() - event.end.getTime()) / MS_PER_MINUTE;\n        if (\n          interval >= this.intermissionRange[0] &&\n          interval <= this.intermissionRange[1]\n        ) {\n          rightText = rightText.concat(\n            createElement('br'),\n            this.format.duration(interval * MS_PER_MINUTE),\n          );\n        }\n      }\n    }\n    const timeClass = 'sked-tape__dummy-event-time';\n    const leftClass = timeClass + ' ' + timeClass + '--left';\n    const rightClass = timeClass + ' ' + timeClass + '--right';\n    return createElement(\n      'div',\n      {\n        className: 'sked-tape__dummy-event',\n        ref: 'dummyEvent',\n        style: {\n          left: this.computeEventOffset(event as Range<Date>),\n          width: this.computeEventWidth(event as Range<Date>),\n        },\n      },\n      [\n        createElement('div', { className: leftClass }, leftText),\n        createElement('div', { className: rightClass }, rightText),\n      ],\n    );\n  }\n\n  private renderEventRow(location: SkedLocation, events: SkedEvent[]) {\n    const intersections = this.getIntersections(location.id);\n    const indicatorNode = this.renderTimeIndicator(location);\n    const eventNodes = this.renderEvents(events);\n    const gapNodes = this.renderGaps(events, intersections);\n    const intersectionNodes = this.renderIntersections(intersections);\n    let dummyEventNode: VNode | [] = [];\n    if (this.dummyEvent && this.dummyEvent.locationId === location.id) {\n      dummyEventNode = this.renderDummyEvent(this.dummyEvent);\n    }\n    return createElement(\n      'li',\n      {\n        className: 'sked-tape__event-row',\n        dataset: { locationId: location.id },\n        ref: 'eventRow' + location.id,\n      },\n      [indicatorNode].concat(eventNodes, gapNodes, intersectionNodes, dummyEventNode),\n    );\n  }\n\n  private renderTimeline(): VNode {\n    const locations = this.getLocations();\n    // Array of array of events. The outer array is mapped from locations.\n    const eventsByRows: SkedEvent[][] = locations.map(\n      location => this.filterLocationEvents(location.id),\n    );\n    return createElement(\n      'ul',\n      {\n        className: 'sked-tape__timeline',\n        ref: 'timeline',\n      },\n      locations.map((location, i) => this.renderEventRow(location, eventsByRows[i])),\n    );\n  }\n\n  private renderHours(): VNode {\n    const timePoints = [];\n    const tick = new Date(this.start);\n    while (tick.getTime() <= this.end.getTime()) {\n      timePoints.push(new Date(tick));\n      tick.setTime(tick.getTime() + 60 * 60 * 1000);\n    }\n    const lastTimePoint = timePoints.pop();\n\n    return createElement(\n      'div',\n      { className: 'sked-tape__hours' },\n      createElement(\n        'ul',\n        null,\n        timePoints.map((timePoint, index) => {\n          const times: VNode[] = [];\n          for (let i = 0; i < (index === timePoints.length - 1 ? 2 : 1); i++) {\n            const hour = i === 0 ? timePoint.getHours() : lastTimePoint.getHours();\n            times.push(createElement(\n              'time',\n              { datetime: (i === 0 ? timePoint : lastTimePoint).toISOString() },\n              this.format.hours(hour === 24 ? 0 : hour),\n            ));\n          }\n          return createElement('li', null, times);\n        }),\n      ),\n    );\n  }\n\n  private renderDates(): VNode {\n    const firstMidnight = getMidnightAfter(this.start);\n    const lastMidnight = getMidnightBefore(this.end);\n    const queue: Array<{ weight: number, text: string }> = [];\n    if (firstMidnight > lastMidnight) {\n      // The range is within the same day\n      queue.push({ weight: 1, text: this.format.date(this.start) });\n    } else {\n      queue.push({\n        text: this.format.date(this.start),\n        weight: getMsToMidnight(this.start) / MS_PER_DAY,\n      });\n      for (const day = new Date(firstMidnight); day < lastMidnight;) {\n        day.setTime(day.getTime() + 1000);\n        queue.push({ weight: 1, text: this.format.date(day) });\n        day.setTime(day.getTime() + MS_PER_DAY - 1000);\n      }\n      queue.push({\n        text: this.format.date(this.end),\n        weight: getMsFromMidnight(this.end) / MS_PER_DAY,\n      });\n    }\n    const totalWeight = queue.reduce((total, item) => total + item.weight, 0);\n    const canvasWidth = this.computeCanvasWidth();\n    return createElement(\n      'ul',\n      { className: 'sked-tape__dates', ref: 'dates' },\n      queue.map(item => {\n        const proportion = item.weight / totalWeight;\n        const classes = ['sked-tape__date'];\n        if (proportion * canvasWidth < this.dateTextWidth) {\n          classes.push('sked-tape__date--short');\n        }\n        return createElement(\n          'li',\n          {\n            className: classes.join(' '),\n            style: { width: (proportion * 100).toFixed(10) + '%' },\n            title: item.text,\n          },\n        );\n      }),\n    );\n  }\n\n  private renderGrid(): VNode {\n    let n = Math.floor((this.end.getTime() - this.start.getTime()) / MS_PER_HOUR);\n    const lis = [];\n    while (n-- > 0) {\n      lis.push(createElement('li'));\n    }\n    return createElement(\n      'ul',\n      { className: 'sked-tape__grid' },\n      lis,\n    );\n  }\n\n  private renderTimeWrap(oldScroll: number): VNode {\n    const hours = this.renderHours();\n    return createElement(\n      'div',\n      { className: 'sked-tape__time-wrap' },\n      createElement(\n        'div',\n        {\n          className: 'sked-tape__time-frame',\n          ref: 'frame',\n          scrollLeft: oldScroll || 0,\n          tabIndex: 0,\n        },\n        createElement(\n          'div',\n          {\n            className: 'sked-tape__time-canvas',\n            ref: 'canvas',\n            style: {\n              width: this.computeCanvasWidth() + 'px',\n            },\n          },\n          (this.showDates ? [this.renderDates()] : []).concat([\n            hours,\n            createElement(\n              'div',\n              { className: 'sked-tape__timeline-wrap' },\n              [\n                this.renderGrid(),\n                this.renderTimeline(),\n              ],\n            ),\n            hours.clone(),\n          ]),\n        ),\n      ),\n    );\n  }\n\n  private render({ preserveScroll = true }: { preserveScroll?: boolean } = {}) {\n    let oldScrollLeft = 0;\n    if (preserveScroll && this.refs.frame) {\n      oldScrollLeft = (this.refs.frame as HTMLElement).scrollLeft;\n    }\n\n    this.cleanup();\n\n    const classes = ['sked-tape'];\n    if (this.showDates) {\n      classes.push('sked-tape--has-dates');\n    }\n    if (this.zoom < 1) {\n      classes.push('sked-tape--condensed');\n    }\n    const vRoot = createElement(\n      'div',\n      { className: classes.join(' ') },\n      [\n        this.renderAside(),\n        this.renderTimeWrap(oldScrollLeft),\n      ],\n    );\n    this.materialize(vRoot);\n\n    if (!this.smoothScroller) {\n      this.smoothScroller = new SmoothScroller(this.refs.frame as HTMLElement);\n    } else {\n      this.smoothScroller.resetElement(this.refs.frame as HTMLElement);\n    }\n    this.registerEventHandlers();\n\n    this.indicatorTimeout = setInterval(() => {\n      for (const location of this.locations) {\n        this.materializePartial(this.renderTimeIndicator(location));\n      }\n    }, 1000);\n  }\n\n  private scheduleRerender() {\n    if (!this.animFrameId) {\n      if (window.requestAnimationFrame) {\n        this.animFrameId = requestAnimationFrame(() => {\n          delete this.animFrameId;\n          this.render();\n        });\n      } else {\n        this.animFrameId = setTimeout(() => {\n          delete this.animFrameId;\n          this.render();\n        }, 0);\n      }\n    }\n  }\n\n  private unscheduleRerender() {\n    if (this.animFrameId) {\n      if (window.cancelAnimationFrame) {\n        cancelAnimationFrame(this.animFrameId);\n      } else {\n        clearTimeout(this.animFrameId);\n      }\n      delete this.animFrameId;\n    }\n  }\n}\n","export interface ScrollPos {\n  left: number;\n  top: number;\n}\n\n/**\n * Does linear interpolation between `a` and `b` by factor `f`.\n */\nfunction lerp(a: number, b: number, f: number): number {\n  return a + (b - a) * f;\n}\n\n/**\n * Clamps value x between a and b.\n */\nfunction clamp(x: number, a: number, b: number): number {\n  return Math.max(a, Math.min(b, x));\n}\n\n/**\n * A cross-browser scrolling controller which gathers srolling messages and\n * combines them appropriately to animation tween to play. In particular it\n * allows to make the 1st mouse wheel scroll horizontally rather than vertically.\n * It also can be used to create a panning effect with the mouse.\n * The object of this class is designed to be aggregated in a controlled\n * component.\n */\nexport default class SmoothScroller {\n  private from: ScrollPos = { left: 0, top: 0 };\n  private to?: ScrollPos;\n  private timerId?: number | NodeJS.Timeout = null;\n  private startTime: number = 0;\n  private duration: number = 100;\n\n  constructor(private el: HTMLElement) {}\n\n  /**\n   * Must be called whenever the related element is replaced by some other.\n   * For example, it may happen if DOM tree being changed by your frontend\n   * framefork (like React / Vue / Angular).\n   */\n  public resetElement(el: HTMLElement) {\n    if (this.el !== el) {\n      this.stop();\n      this.el = el;\n      this.to = null;\n    }\n  }\n\n  /**\n   * Adds some delta to the scroll target and starts playing the animation.\n   * The function doesn't stop the existing animation, if any, but goes between\n   * them smoothly.\n   */\n  public addScrollBy({ left = 0, top = 0 }: Partial<ScrollPos> = {}) {\n    this.from = {\n      left: this.el.scrollLeft,\n      top: this.el.scrollTop,\n    };\n    this.to = {\n      left: clamp((this.to ? this.to.left : this.from.left) + left, 0, this.maxScrollLeft),\n      top: clamp((this.to ? this.to.top : this.from.left) + top, 0, this.maxScrollTop),\n    };\n    this.play();\n  }\n\n  /**\n   * Should be used to safely release the resources involved.\n   */\n  public destroy() {\n    this.unscheduleNextFrame();\n  }\n\n  private stop({ goToEnd = false } = {}) {\n    if (goToEnd) {\n      this.step(1);\n    }\n    if (this.timerId) {\n      this.unscheduleNextFrame();\n    }\n    this.from = {\n      left: this.el.scrollLeft,\n      top: this.el.scrollTop,\n    };\n  }\n\n  private play({ reset = true } = {}) {\n    if (this.to) {\n      if (reset) {\n        this.startTime = Date.now();\n      }\n      if (!this.timerId) {\n        this.scheduleNextFrame();\n      }\n    }\n  }\n\n  private get maxScrollLeft() {\n    return this.el.scrollWidth - this.el.clientWidth;\n  }\n\n  private get maxScrollTop() {\n    return this.el.scrollHeight - this.el.clientHeight;\n  }\n\n  private stepScrollPos(factor: number): ScrollPos {\n    return {\n      left: lerp(this.from.left, this.to.left, clamp(factor, 0, 1)),\n      top: lerp(this.from.top, this.to.top, clamp(factor, 0, 1)),\n    };\n  }\n\n  private step(factor: number) {\n    if (this.to) {\n      const scrollPos = this.stepScrollPos(factor);\n      this.el.scrollLeft = scrollPos.left;\n      this.el.scrollTop = scrollPos.top;\n    }\n  }\n\n  private scheduleNextFrame() {\n    this.timerId = window.requestAnimationFrame ?\n      requestAnimationFrame(this.onFrame) :\n      setTimeout(this.onFrame, 1000 / 60);\n  }\n\n  private unscheduleNextFrame() {\n    if (this.timerId) {\n      if (window.requestAnimationFrame) {\n        cancelAnimationFrame(this.timerId as number);\n      } else {\n        clearTimeout(this.timerId as NodeJS.Timer);\n      }\n      this.timerId = null;\n    }\n  }\n\n  private onFrame = () => {\n    const factor = (Date.now() - this.startTime) / this.duration;\n    this.step(factor);\n    if (factor < 1) {\n      this.scheduleNextFrame();\n    } else {\n      this.timerId = null;\n      this.to = null;\n    }\n  }\n}\n","import cloneDeep from 'lodash/cloneDeep';\nimport difference from 'lodash/difference';\nimport intersection from 'lodash/intersection';\n\nexport interface VNodeProps {\n  [key: string]: any;\n}\n\nexport type VNodeChild = VNode | string | Array<VNode | string>;\n\nexport interface RefMap {\n  [key: string]: VNode | HTMLElement;\n}\n\nconst INTERNAL_PROPS = ['key', 'ref'];\n\n/**\n * Returns a boolean value indicating whether the property is used by VDom\n * internally and should not be displayed in real DOM.\n */\nfunction isInternalProp(propName: string) {\n  return INTERNAL_PROPS.indexOf(propName) >= 0;\n}\n\n/**\n * Resets the property belonging to an instance of HTMLElement to its default value.\n */\nfunction assignDefaultElementProp(elem: HTMLElement, propName: string) {\n  switch (propName) {\n    case 'style':\n      elem.style.cssText = '';\n      break;\n    case 'dataset':\n      for (const key of Object.keys(elem.dataset)) {\n        delete elem.dataset[key];\n      }\n      break;\n    default:\n      (elem as any)[propName] = '';\n  }\n}\n\n/**\n * Assigns the value of some property belonging to an instance of HTMLElement.\n *\n * The main purpose on this function is to unify assigning properties either\n * of string or object type.\n */\nfunction assignElementProp(elem: HTMLElement, propName: string, value: string) {\n  if (typeof value === 'object') {\n    assignDefaultElementProp(elem, propName);\n    for (const key of Object.keys(value)) {\n      (elem as any)[propName][key] = value[key];\n    }\n  } else {\n    (elem as any)[propName] = value;\n  }\n}\n\n/**\n * Represents the virtual node.\n */\nexport default class VNode {\n  /**\n   * Applies changes to the real DOM so that it would match the virtual tree\n   * with root at `dstVNode`.\n   *\n   * The initial hierarchy of `dstNode` must match the virtual hierarchy\n   * described by `srcVNode`.\n   *\n   * During execution, the function updates references to DOM and VDom nodes in\n   * the mapping object `refs`. Only the nodes with the `ref` property set are\n   * added to the reference map. The value of the property is used as a key in\n   * the map.\n   */\n  public static commit(\n    dstNode: HTMLElement,\n    dstVNode: VNode,\n    srcVNode: VNode,\n    refs: RefMap,\n  ) {\n    if (dstVNode.tagName !== srcVNode.tagName) {\n      dstVNode.assign(srcVNode);\n      const newNode = dstVNode.render(refs);\n      dstNode.parentNode.replaceChild(newNode, dstNode);\n      return newNode;\n    }\n    VNode.commitAttributes(dstNode, dstVNode, srcVNode);\n    let dstChild = dstNode.firstChild;\n    for (let i = 0; i < Math.max(dstVNode.children.length, srcVNode.children.length); i++) {\n      // Skip nodes other than element or text (e.g. attribute or entity ref).\n      while (\n        dstChild &&\n        dstChild.nodeType !== Node.ELEMENT_NODE &&\n        dstChild.nodeType !== Node.TEXT_NODE\n      ) {\n        dstChild = dstChild.nextSibling;\n      }\n      if (i >= dstVNode.children.length) { // dstVNode has less children\n        if (srcVNode.children[i] instanceof VNode) {\n          const vNode = (srcVNode.children[i] as VNode).clone();\n          dstVNode.appendChild(vNode);\n          dstNode.appendChild(vNode.render(refs));\n        } else {\n          const text = srcVNode.children[i].toString();\n          dstVNode.appendChild(text);\n          dstNode.appendChild(document.createTextNode(text));\n        }\n      } else if (i >= srcVNode.children.length) { // srcVNode has less children\n        if (dstVNode.children[i] instanceof VNode) {\n          (dstVNode.children[i] as VNode).unsetRefsOfSubtree(refs);\n        }\n        dstVNode.removeChildAt(i--);\n        const nextChild = dstChild.nextSibling;\n        dstNode.removeChild(dstChild);\n        dstChild = nextChild;\n      } else if (\n        dstVNode.children[i] instanceof VNode &&\n        srcVNode.children[i] instanceof VNode\n      ) {\n        // Both source and destination are VNode which implies the dstChild to\n        // be an HTMLElement.\n        dstChild = VNode.commit(\n          dstChild as HTMLElement,\n          dstVNode.children[i] as VNode,\n          srcVNode.children[i] as VNode,\n          refs,\n        );\n        dstChild = dstChild.nextSibling;\n      } else {\n        if (dstVNode.children[i] !== srcVNode.children[i]) {\n          let newNode;\n          if (srcVNode.children[i] instanceof VNode) {\n            // The source node is VNode, the destination is not.\n            dstVNode.replaceChildAt(i, (srcVNode.children[i] as VNode).clone());\n            newNode = (dstVNode.children[i] as VNode).render(refs);\n          } else {\n            // The source node is textual the destination is either\n            // VNode or textual node as well but with some other text.\n            if (dstVNode.children[i] instanceof VNode) {\n              (dstVNode.children[i] as VNode).unsetRefsOfSubtree(refs);\n            }\n            dstVNode.children[i] = srcVNode.children[i];\n            newNode = document.createTextNode(srcVNode.children[i] as string);\n          }\n          dstNode.replaceChild(newNode, dstChild);\n          dstChild = newNode;\n        }\n        dstChild = dstChild.nextSibling;\n      }\n    }\n    return dstNode;\n  }\n\n  /**\n   * A helper which applies changes to properties/attributes of an HTMLElement.\n   */\n  private static commitAttributes(dstNode: HTMLElement, dstVNode: VNode, srcVNode: VNode) {\n    const dstNames = Object.keys(dstVNode.props);\n    const srcNames = Object.keys(srcVNode.props);\n    const obsoleteNames = difference(dstNames, srcNames);\n    const newNames = difference(srcNames, dstNames);\n    const commonNames = intersection(srcNames, dstNames);\n    for (const name of obsoleteNames) {\n      if (!isInternalProp(name)) {\n        if (name in dstNode) {\n          assignDefaultElementProp(dstNode, name);\n        } else {\n          dstNode.removeAttribute(name);\n        }\n      }\n      delete dstVNode.props[name];\n    }\n    for (const name of newNames) {\n      const value = srcVNode.props[name];\n      if (!isInternalProp(name)) {\n        if (name in dstNode) {\n          assignElementProp(dstNode, name, value);\n        } else {\n          dstNode.setAttribute(name, value);\n        }\n      }\n      dstVNode.props[name] = value;\n    }\n    for (const name of commonNames) {\n      if (dstVNode.props[name] !== srcVNode.props[name]) {\n        const value = srcVNode.props[name];\n        if (!isInternalProp(name)) {\n          if (name in dstNode) {\n            assignElementProp(dstNode, name, value);\n          } else {\n            dstNode.setAttribute(name, value);\n          }\n        }\n        dstVNode.props[name] = value;\n      }\n    }\n  }\n\n  public tagName: string;\n  public props: VNodeProps;\n  public children: Array<VNode | string>;\n  public parent?: VNode;\n\n  constructor(tagName: string, props?: VNodeProps, children?: VNodeChild) {\n    this.tagName = tagName;\n    this.props = props || {};\n    this.children = children ? (children instanceof Array ? children : [children]) : [];\n    for (const child of this.children) {\n      if (child instanceof VNode) {\n        child.parent = this;\n      }\n    }\n  }\n\n  public clone(): VNode {\n    const children = this.children.map(\n      child => child instanceof VNode ? child.clone() : cloneDeep(child),\n    );\n    return new VNode(this.tagName, cloneDeep(this.props), children);\n  }\n\n  /**\n   * Copies the data of other VNode to this one.\n   * The property `parent` remains untouched.\n   */\n  public assign(vNode: VNode) {\n    this.tagName = vNode.tagName;\n    this.props = cloneDeep(vNode.props);\n    this.children = vNode.children.map(child => {\n      if (child instanceof VNode) {\n        child = child.clone();\n        child.parent = this;\n        return child;\n      }\n      return cloneDeep(child);\n    });\n    return this;\n  }\n\n  /**\n   * Deletes references declared in props of the vNode and it's children from the\n   * `refs` map.\n   */\n  public unsetRefsOfSubtree(refs: RefMap) {\n    if (this.props.ref) {\n      delete refs[this.props.ref];       // ref to an element\n      delete refs['#' + this.props.ref]; // ref to a vNode\n    }\n    for (const child of this.children) {\n      if (child instanceof VNode) {\n        child.unsetRefsOfSubtree(refs);\n      }\n    }\n  }\n\n  /**\n   * Adds a new child item to the end assigning the property `parent` of `VNode`s.\n   */\n  public appendChild(child: VNode | string) {\n    if (child instanceof VNode) {\n      child.parent = this;\n    }\n    this.children.push(child);\n  }\n\n  /**\n   * Removes the child by its index from the internal array of children.\n   * The method assigns `null` to the `parent` of the `VNode`s removed.\n   */\n  public removeChildAt(index: number) {\n    if (this.children[index] instanceof VNode) {\n      (this.children[index] as VNode).parent = null;\n    }\n    this.children.splice(index, 1);\n  }\n\n  public replaceChildAt(index: number, child: VNode | string) {\n    if (child instanceof VNode) {\n      child.parent = this;\n    }\n    this.children[index] = child;\n  }\n\n  /**\n   * Creates the DOM tree from this virtual node hierarchy.\n   */\n  public render(refs: RefMap): HTMLElement {\n    const elem = document.createElement(this.tagName);\n\n    if (this.props) {\n      // update refs\n      if (refs && this.props.ref) {\n        refs[this.props.ref] = elem;\n        refs['#' + this.props.ref] = this;\n      }\n      // Create attributes from props\n      for (const propName of Object.keys(this.props)) {\n        if (propName in elem) {\n          if (typeof this.props[propName] !== 'object') {\n            (elem as any)[propName] = this.props[propName];\n          } else {\n            for (const key of Object.keys(this.props[propName])) {\n              (elem as any)[propName][key] = this.props[propName][key];\n            }\n          }\n        } else if (!isInternalProp(propName)) {\n          elem.setAttribute(propName, this.props[propName]);\n        }\n      }\n    }\n\n    for (const child of this.children) {\n      if (child instanceof VNode) {\n        elem.appendChild(child.render(refs));\n      } else {\n        elem.appendChild(document.createTextNode(child));\n      }\n    }\n    return elem;\n  }\n}\n","import VNode, { RefMap } from './VNode';\n\n/**\n * Represents tree of virtual nodes.\n */\nexport default class VTree {\n  protected root: HTMLElement;\n  protected vRoot: VNode;\n  protected refs: RefMap;\n\n  constructor(elem: HTMLElement) {\n    this.root = elem;\n    this.vRoot = new VNode(this.root.tagName.toLowerCase());\n    this.refs = {};\n  }\n\n  public materialize(vNode: VNode): HTMLElement {\n    this.root = VNode.commit(this.root, this.vRoot, vNode, this.refs);\n    return this.root;\n  }\n\n  /**\n   * Rerenders the virtual subtree and alters the corresponding nodes of DOM.\n   * You may use this function to update part of VTree.\n   */\n  public materializePartial(vNode: VNode) {\n    const ref = vNode.props.ref;\n    if (!ref) {\n      throw new Error('The vNode given has no ref property');\n    }\n    const dstVNode = this.refs['#' + ref] as VNode;\n    if (!dstVNode) {\n      throw new Error('There is no ref=\"' + ref + '\" defined');\n    }\n    VNode.commit(this.refs[ref] as HTMLElement, dstVNode, vNode, this.refs);\n  }\n\n  /**\n   * Rerenders the virtual subtree and alters the corresponding nodes of DOM.\n   * You may use this function to update part of VTree by adding a `vNode` to the\n   * end of children of the node referenced by `ref`.\n   */\n  public materializeNewChild(ref: string, vNode: VNode) {\n    const dstVNode = this.refs['#' + ref] as VNode;\n    if (!dstVNode) {\n      throw new Error('There is no ref=\"' + ref + '\" defined');\n    }\n    dstVNode.appendChild(vNode);\n    (this.refs[ref] as HTMLElement).appendChild(vNode.render(this.refs));\n  }\n\n  /**\n   * Rerenders the virtual subtree and alters the corresponding nodes of DOM.\n   * You may use this function to update part of VTree.\n   */\n  public dematerializePartial(ref: string) {\n    const dstVNode = this.refs['#' + ref] as VNode;\n    if (dstVNode) {\n      // Remove real and virtual nodes from their trees\n      const elem = this.refs[ref] as HTMLElement;\n      elem.parentNode.removeChild(elem);\n      dstVNode.parent.removeChildAt(dstVNode.parent.children.indexOf(dstVNode));\n      // Make sure no refs will remain\n      dstVNode.unsetRefsOfSubtree(this.refs);\n    }\n  }\n}\n","export const SECS_PER_DAY = 24 * 60 * 60;\nexport const MS_PER_DAY = SECS_PER_DAY * 1000;\nexport const MS_PER_MINUTE = 60 * 1000;\nexport const MS_PER_HOUR = 60 * MS_PER_MINUTE;\n\nexport interface Range<T> {\n  start: T;\n  end: T;\n}\n\nexport function rangesIntersection<T>(a: Range<T>, b: Range<T>): Range<T> {\n  const min = a.start < b.start  ? a : b;\n  const max = min === a ? b : a;\n\n  // min ends before max starts -> no intersection\n  if (min.end < max.start) {\n    return null;\n  }\n\n  return {\n    end: min.end < max.end ? min.end : max.end,\n    start: max.start,\n  };\n}\n\nexport function countRangesIntersections<T>(ranges: Array<Range<T>>): number {\n  let count: number = 0;\n  for (let i = 1; i < ranges.length; i++) {\n    if (rangesIntersection(ranges[i - 1], ranges[i]) !== null) {\n      ++count;\n    }\n  }\n  return count;\n}\n\nexport function closest(el: HTMLElement, selector: string): HTMLElement {\n  while (el && !el.matches(selector)) {\n    el = el.parentElement;\n  }\n  return el;\n}\n\nexport function removeClass(el: HTMLElement, names: string) {\n  const prohibited = names.split(' ');\n  const className = el.className\n    .split(' ')\n    .filter(name => prohibited.indexOf(name) < 0)\n    .join(' ');\n  if (el.className !== className) {\n    el.className = className;\n  }\n}\n\nexport function addClass(el: HTMLElement, names: string) {\n  const prohibited = names.split(' ');\n  const className = el.className\n    .split(' ')\n    .filter(name => prohibited.indexOf(name) < 0)\n    .concat(prohibited)\n    .join(' ');\n  if (el.className !== className) {\n    el.className = className;\n  }\n}\n\nexport function getElementOffset(element: HTMLElement) {\n  const de = document.documentElement;\n  const box = element.getBoundingClientRect();\n  const top = box.top + window.pageYOffset - de.clientTop;\n  const left = box.left + window.pageXOffset - de.clientLeft;\n  return { top, left };\n}\n\nexport function floorHours(date: Date): Date {\n  const floor = new Date(date);\n  floor.setHours(date.getHours(), 0, 0, 0);\n  return floor;\n}\n\nexport function ceilHours(date: Date): Date {\n  const floor = floorHours(date);\n  if (floor < date) { // not equal\n    floor.setTime(floor.getTime() + MS_PER_HOUR);\n  }\n  return floor;\n}\n\nexport function eventFromSkedEvent(e: MouseEvent) {\n  return !!closest(e.target as HTMLElement, '.sked-tape__event, .sked-tape__intersection');\n}\n\nexport function getDurationHours(start: Date, end: Date) {\n  return (end.getTime() - start.getTime()) / MS_PER_HOUR;\n}\n\nexport function getMsFromMidnight(d: Date) {\n  const secs = d.getHours() * 60 * 60 + d.getMinutes() * 60 + d.getSeconds();\n  return secs * 1000 + d.getMilliseconds();\n}\n\nexport function getMsToMidnight(d: Date) {\n  return MS_PER_DAY - getMsFromMidnight(d);\n}\n\nexport function getMidnightAfter(d: Date) {\n  d = new Date(d);\n  d.setTime(d.getTime() + getMsToMidnight(d));\n  return d;\n}\n\nexport function getMidnightBefore(d: Date) {\n  d = new Date(d);\n  d.setTime(d.getTime() - getMsFromMidnight(d));\n  return d;\n}\n\nexport function gapBetween(a: Range<Date>, b: Range<Date>) {\n  const min = a.start < b.start  ? a : b;\n  const max = min === a ? b : a;\n  return max.start.getTime() - min.end.getTime();\n}\n","import SkedTape from './SkedTape';\nimport './SkedTape.sass';\n\nexport default SkedTape;\n","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash_clone__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash_cloneDeep__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash_difference__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash_intersection__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash_omit__;"],"sourceRoot":""}